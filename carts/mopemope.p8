pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function nextscene()
 scene+=1
 s_f=0
 camera()
 pal()
 once_flag=false
end

function scene0()
 
end

function scene1()
 
 rectfill(0,0,127,31,10)
 rectfill(0,32,127,63,9)
 rectfill(0,64,127,95,14)
 rectfill(0,96,127,127,2)
 
 --print("mopemope",49,56,0)
 --print("leaf & optie",41,63,0)
 local tf=s_f%16<8
 local tk=s_f%8
 for i=0,17 do
  for j=0,17 do
   if((tf and (i+j)%2==0)or(not tf and ((i+j)%2==1)))rectfill(i*8,j*8-tk,i*8+7,j*8-tk+7,7)
  end
 end
 if s_f%36<18 then
	 print("mopemope",48,55,4)
	 print("leaf & optie",40,62,4)
	else
	 print("mopemope",48,55,11)
	 print("leaf & optie",40,62,11)
	end
	if(s_f>=36*8)nextscene()
end

function scene2()
	rectfill(0,0,127,127,11)
	circfill(63,70,20,7)
	circfill(63,70,12,11)
	spr(64,24,30,2,2)
	spr(64,40,20,2,2)
	spr(64,56,30,2,2)
	spr(64,72,20,2,2)
	spr(64,88,30,2,2)
	if s_f%36<18 then 
	 spr(68,57,62,2,2)
	else
		spr(70,57,62,2,2)
	end
	if(s_f>=18*32)nextscene()
end


function scene3()
	if not once_flag then
	 trees={}
	 for i=1,35 do
		add(trees,{
		 x=(i-1)*8,
		 y=30+rnd(10)
		})
		once_flag=true
	end
	end
 rectfill(0,0,127,127,11)
 rectfill(0,62,127,76,7)
 for t in all(trees) do
  spr(64,t.x,t.y,2,2)
 end
 if s_f%15==flr(rnd(15)) then
  add(balls,{
   x=127,
   t=rnd(36),
   y=0,
   z=62+flr(rnd(7)),
   cl=rndc[flr(rnd(#rndc))+1]
  })
 end
 if #balls>0 then
 	for b in all(balls) do
 	 b.x-=0.5
 	 b.y=-abs(sin(b.t/36))*10
 	 b.t+=0.5
 	 if(b.x<-10)del(balls,b)
 	end
 	for b in all(balls) do
 	 pal(7,b.cl)
 	 spr(3,b.x,b.y+b.z)
 	 pal()
 	end
 end
 if(s_f>=36*16)nextscene()
end

--lots of flowers
function scene4()
 if not once_flag then
 	trees={}
 	for i=1,32 do
		add(trees,{
		 x=(i-1)*8,
		 y=30+rnd(10)
		})
		end
		flowers={}
		for i=1,20 do
			add(flowers,{
		 	x=(i-1)*18,
		 	y=64+rnd(10),
		 	cl=rndf[flr(rnd(#rndf))+1]
			})
		end
		once_flag=true
	end
	rectfill(0,0,500,500,11)
	campos.x+=0.25
	camera(campos.x,campos.y)
	for t in all(trees) do
  spr(64,t.x,t.y,2,2)
 end
 --spr(68,10,64,2,2)
 --print(#flowers,127,0,7)
	for f in all(flowers) do
		pal(12,f.cl)
	 if s_f%36<18 then
	  spr(68,f.x,f.y,2,2)
	 else
	  spr(70,f.x,f.y,2,2)
	 end
	 pal()
	end
	if(s_f>=36*16)nextscene()
end

--flowers and balls
function scene5()
 if not once_flag then
  balls={}
  trees={}
  for i=1,32 do
		add(trees,{
		 x=-1+rnd(10),
		 y=(i-8)*20
		})
		end
		for i=1,32 do
		add(trees,{
		 x=117-rnd(10),
		 y=(i-8)*20
		})
		end
		flowers={}
		for i=1,20 do
			add(flowers,{
		 	x=16+rnd(10),
		 	y=(i-1)*18,
		 	cl=rndf[flr(rnd(#rndf))+1]
			})
		end
		for i=1,20 do
			add(flowers,{
		 	x=90+rnd(10),
		 	y=(i-1)*18,
		 	cl=rndf[flr(rnd(#rndf))+1]
			})
		end
		once_flag=true
 end
 if s_f%15==flr(rnd(15)) then
  add(balls,{
  	z=-20,
   x=40+rnd(36),
   t=rnd(36),
   y=0,
   cl=rndc[flr(rnd(#rndc))+1]
  })
 end
 rectfill(0,0,127,127,11)
 rectfill(40,0,87,127,10)
 for t in all(trees) do
  spr(64,t.x,t.y,2,2)
 end
 for f in all(flowers) do
		pal(12,f.cl)
	 if s_f%36<18 then
	  spr(68,f.x,f.y,2,2)
	 else
	  spr(70,f.x,f.y,2,2)
	 end
	 pal()
	end
 if #balls>0 then
 	for b in all(balls) do
 	 b.z=-abs(sin(b.t/36))*10
 	 b.y+=0.5
 	 b.t+=0.5
 	 if(b.y>150)del(balls,b)
 	end
 	for b in all(balls) do
 	 pal(7,b.cl)
 	 spr(72,b.x,b.y+b.z,2,2)
 	 pal()
 	end
 end
 if(s_f>=36*16)nextscene()
end

function scene6()
	if(s_f<6)or(s_f>=36 and s_f<72*5)then
	 rectfill(0,0,127,127,2)
	end
end
sd={[0]=scene0,scene1,scene2,scene3,scene4,scene5,scene6}

function _init()
 music(1)
 f=0
 scene=1
 s_f=0
 rndc={7,11,12,10,15}
 rndf={2,8,9,12}
 flowers={}
	balls={}
	trees={}
	campos={x=0,y=0}
	flag_once=false
end

function _update60()
 f+=1
 s_f+=1
end

function _draw()
	cls()
	sd[scene]()
end
__gfx__
0000000000ccc0000000000000777700002222000055550000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000c71717c000ccc00007171770022222200555555000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700c77777c0c71717c077171777222222225222222500000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700007878700c77777c077171777222222225222022500000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000cc787cc00787870077777777200000025222022500000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000ccc000cc787cc077878777220000225222022500000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003003003030ccc03007787770022002200222222000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000033333000333330000777700002222000055550000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003333000000000000cccc0000000000cccccc00000000000000000000000000777777770000000777777777000000000000000000000000000000000000
0000033333300000000000cccc0000000000cccccc00000000000000000000000007777777777000007777777777700000000000000000000000000000000000
000033333333000000ccc00cc00ccc00cc7711771177cc000000cccccc0000000077717777177700077771777717770000000000000000000000000000000000
003333333333330000ccc777777ccc00cc7711771177cc000000cccccc0000000777717777177770777771777717777000000000000000000000000000000000
003333333333330000cc77117117cc00cc7777777777cc00cc7711771177cc007777717777177777777771777717777700000000000000000000000000000000
00003333333300000000771171170000cc7777777777cc00cc7711771177cc007777717777177777777771777717777700000000000000000000000000000000
000333333333300000007777777700000077887788770000cc7777777777cc007777717777177777777771777717777700000000000000000000000000000000
003333333333333000cc77877787cc000077887788770000cc7777777777cc007777777777777777777777777777777700000000000000000000000000000000
333333333333333300ccc778887ccc00cccc778877cccc0000778877887700007777777777777777777777777777777700000000000000000000000000000000
333334433333333300ccc00cc00ccc00cccc778877cccc0000778877887700007778777777778777777877777777877700000000000000000000000000000000
0000044440400000000000cccc0000000000cccccc000000cccc778877cccc007777877777787777777787777778777700000000000000000000000000000000
0000044444400000000000cccc0000000000cccccc000000cccc778877cccc007777788888877777777778888887777700000000000000000000000000000000
00004444444400000000000bb000000033000033000033003300cccccc0033000777777777777770077777777777777000000000000000000000000000000000
0000404444040000bbbb000bb000bbbb33000033000033003300cccccc0033000077777777777700007777777777770000000000000000000000000000000000
0044044444044000bbbbbb0bb0bbbbbb003333333333000000333333333300000007777777777000000777777777700000000000000000000000000000000000
44400404440004440000bbbbbbbb0000003333333333000000333333333300000000777777770000000077777777000000000000000000000000000000000000
__sfx__
011200002a545265452a545265452b545265452b545265452d545265452d545265452b545265452b545265452a545265452a545265452b545265452b545265452d545265452d545265452b545265452b54526545
0112000021350000001e350000001a3500000021350000002135023350213501f350213500000021350263502435000000243502335021350000001f350000001e350000001f3500000021350213552130500000
0112000021350000001e350000001a3500000021350000002135023350213501f3502135000000233502435026350000001f3501e3501f3500000026350000002435000000233500000021350213550000000000
01120000215550000021555215551f5551f5001f555000001e5551e5551e5551e5551c555000001c555000001a555000001a5551a5551c555000001c555000001e555000001f5550000021555215000000000000
01120000215550000021555215551f55500000215550000023555235552355524555265550000024555235552155500000215551f5551e555000001c555000001a5501a5501a5501a55500000000000000000000
011200000c05300000246250c1030c0530000024625000000c0530000024625246250c0530000024625000000c0530000024625000000c0530000024625000000c05300000246252462524625000002462500000
011200002d755007002d7552d7552b755007002b7550070026755287552a7552b7552d755007002d755327553075500700307552f7552d755007002b755007002a7552a7002b7552d7052d755007000070000700
011200002d755007002d7552d7552b755007002b7550070026755287552a7552b7552d755007002a755287552675026750267552b7052a7550070028755007002675526700327550070026755007001a70500700
011200000e7500000015750000000e7500000015750000000e7500e70015750000000e7500000015750000000e7500000015750000000e7500000015750000000e7500000015750000000e750000001575000000
0112000021242002021e242002021a2420020221242002022124223242212421f242212420020221242262422424200202242422324221242002021f242002021e2421f2021f2420020221242212422124200202
0112000021242000001e242000001a2420000021242000002124223242212421f2422124200000232422424226242000001f2421e2421f2420000026242000002424200000232420000021242212422124200000
01120000327752d775327752d775307752d775307752d7752f7752a7752f7752a7752d7752a7752d7752a7752b775267752b775267752a775267752a775267752b775267752b775267752d775267752d77526775
01120000327452d745327452d745307452d745307452d7452f7452a7452f7452a7452d7452a7452d7452a7452674526745000002674528745000002a745000002b745000003e7150000032715000000000000000
011200000e1520e15509152091550c1520c15509152091550b1520b15509152091550915209155091520915507152071550915209155061520615509152091550715207155091520915509152091550915209155
011200000e1720e17509172091750c1720c17509172091750b1720b17509172091750917209175091720917502170021700000002170041700000006170000000717207172071750000000000000000000000000
011200001865018650000000000018650186501865018650186501865018600186001860018600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01120000157521575512752127550e7520e7551575215755157551775515755137551575215752157551a7520c7020c7020070200702007020070200702007020070200702007020070200702007020070200702
__music__
01 40424344
00 00054348
00 01054308
00 02054308
00 03050608
00 04050708
00 01050908
00 02050a08
00 0b050d44
00 0c450e44
00 0f424344

